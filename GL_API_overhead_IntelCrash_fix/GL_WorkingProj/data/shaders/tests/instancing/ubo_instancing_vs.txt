#version 150 core
//#extension GL_EXT_bindable_uniform : enable
#extension GL_ARB_uniform_buffer_object : enable
#extension GL_EXT_gpu_shader4 : enable

in vec3 s_pos;
in vec3 s_normal;
in vec2 s_uv;

uniform mat4 ModelViewProjectionMatrix;
//bindable uniform vec4 instance_data[4096]; //our uniform αστεπ with instances data
layout(std140) uniform UBO {
	uniform vec4 instance_data[4096];
};

out vec3 instance_color;

void main()
{
	vec4 instance_pos = instance_data[gl_InstanceID*2];
	instance_color = instance_data[gl_InstanceID*2+1].xyz;
	gl_Position = ModelViewProjectionMatrix * vec4(s_pos + instance_pos.xyz, 1.0);
}