#version 150 core

uniform sampler2DArray s_texture_0;
uniform float used_textures_i[6]; //indices of textures for this material

in vec2 uv;
in vec3 instance_color;
out vec4 outColor;

void main()
{
	//simple sample all textures, use used_textures_i to tell waht textures we want to sample
	outColor = vec4(
		(texture(s_texture_0, vec3(uv, used_textures_i[0])).xyz +
		texture(s_texture_0, vec3(uv, used_textures_i[1])).xyz +
		texture(s_texture_0, vec3(uv, used_textures_i[2])).xyz +
		texture(s_texture_0, vec3(uv, used_textures_i[3])).xyz +
		texture(s_texture_0, vec3(uv, used_textures_i[4])).xyz +		
		texture(s_texture_0, vec3(uv, used_textures_i[5])).xyz) * instance_color / 6.0, 1.0);
}
